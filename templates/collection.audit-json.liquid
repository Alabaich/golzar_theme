{% layout none %}
{% paginate collection.products by 250 %}
{
  "products": [
    {% for product in collection.products %}
      {
        "title": {{ product.title | json }},
        "url": "{{ product.url }}",
        "sku": {{ product.variants.first.sku | json }},
        "template": "{{ product.template_suffix | default: 'default' }}"
      }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ],
  "has_next": {% if paginate.next %}true{% else %}false{% endif %}
}
{% endpaginate %}