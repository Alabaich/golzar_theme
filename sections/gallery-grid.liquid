<style>
  .image-gallery-rows-content-{{ section.id }} {
    --image-gap: {{ section.settings.gap_size }}px;
  }

  .gallery-header-{{ section.id }} {
    text-align: left;
  }

  .gallery-title-{{ section.id }} {
    font-weight: 600;
    line-height: 1.2;
    color: #151515;
    margin: 0;
    text-align: left;
  }

  .gallery-subtitle-{{ section.id }} {
    font-weight: 400;
    line-height: 1.6;
    letter-spacing: -0.01em;
    color: #151515;
    margin: 0;
    max-width: 600px;
  }
  .gallery-subtitle-{{ section.id }}
  p {
    margin-top: 0;
    margin-bottom: 0.5em;
  }
  .gallery-subtitle-{{ section.id }}p:last-child {
    margin-bottom: 0;
  }


  .image-row-{{ section.id }} {
    display: flex;
    gap: var(--image-gap);
    margin-bottom: var(--image-gap);
    align-items: stretch;
  }

  .image-container-{{ section.id }} {
    position: relative;
    overflow: hidden;
  }

  .image-container-{{ section.id }}
  img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  .image-container-{{ section.id }} .item-large {
    flex-grow: 2;
    flex-shrink: 1;
    flex-basis: 0;
  }

  .image-container-{{ section.id }}
  .item-small {
    flex-grow: 1;
    flex-shrink: 1;
    flex-basis: 0;
  }

  @media (max-width: 749px) {
    .gallery-title-{{ section.id }} {
      font-size: 32px;
    }
    .gallery-subtitle-{{ section.id }} {
      font-size: 15px;
    }
  }

  @media (max-width: 768px) {
    .image-row-{{ section.id }} {
      flex-direction: column;
      align-items: center;
    }

    .image-container-{{ section.id }} .item-large
    , .image-container-{{ section.id }}
    .item-small {
      width: 100%;
      margin-bottom: var(--image-gap);
      flex-basis: auto;
    }

    .image-row-{{ section.id }}.image-container-{{ section.id }}:last-child {
      margin-bottom: 0;
    }
  }
</style>

<div class="image-gallery-outer-wrapper-{{ section.id }}">
  <div class="page-width pageWidth">
    <div class="image-gallery-rows-content-{{ section.id }}" style="--image-gap: {{ section.settings.gap_size }}px;">

      <div class="gallery-header-{{ section.id }}">
        {% if section.settings.title != blank %}
          <h2 class="gallery-title-{{ section.id }}" title="{{ section.settings.title | escape }}">{{ section.settings.title | escape }}</h2>
        {% endif %}
        {% if section.settings.subtitle != blank and section.settings.subtitle != "<p></p>" %}
          <div class="gallery-subtitle-{{ section.id }}" title="{{ section.settings.subtitle }}">{{ section.settings.subtitle }}</div>
        {% endif %}
      </div>

      {%- assign row1_img_large = section.settings.row1_img_large -%}
      {%- assign row1_img_small1 = section.settings.row1_img_small1 -%}
      {%- assign row1_img_small2 = section.settings.row1_img_small2 -%}

      {% if row1_img_large or row1_img_small1 or row1_img_small2 %}
        <div class="image-row-{{ section.id }}">
          {% if row1_img_large %}
            <div class="image-container-{{ section.id }} item-large">
              <img
                src="{{ row1_img_large | image_url: width: row1_img_large.width }}"
                srcset="{%- if row1_img_large.width >= 375 -%}{{ row1_img_large | image_url: width: 375 }} 375w,{%- endif -%}
                        {%- if row1_img_large.width >= 550 -%}{{ row1_img_large | image_url: width: 550 }} 550w,{%- endif -%}
                        {%- if row1_img_large.width >= 750 -%}{{ row1_img_large | image_url: width: 750 }} 750w,{%- endif -%}
                        {%- if row1_img_large.width >= 1100 -%}{{ row1_img_large | image_url: width: 1100 }} 1100w,{%- endif -%}
                        {%- if row1_img_large.width >= 1500 -%}{{ row1_img_large | image_url: width: 1500 }} 1500w,{%- endif -%}
                        {{ row1_img_large | image_url: width: row1_img_large.width }} {{ row1_img_large.width }}w"
                sizes="(max-width: 768px) 100vw, 50vw"
                alt="{{ row1_img_large.alt | default: 'Large image 1' | escape }}"
                loading="lazy"
                width="{{ row1_img_large.width }}"
                height="{{ row1_img_large.height }}">
            </div>
          {% endif %}
          {% if row1_img_small1 %}
            <div class="image-container-{{ section.id }} item-small">
              <img
                src="{{ row1_img_small1 | image_url: width: row1_img_small1.width }}"
                srcset="{%- if row1_img_small1.width >= 200 -%}{{ row1_img_small1 | image_url: width: 200 }} 200w,{%- endif -%}
                        {%- if row1_img_small1.width >= 300 -%}{{ row1_img_small1 | image_url: width: 300 }} 300w,{%- endif -%}
                        {%- if row1_img_small1.width >= 400 -%}{{ row1_img_small1 | image_url: width: 400 }} 400w,{%- endif -%}
                        {%- if row1_img_small1.width >= 550 -%}{{ row1_img_small1 | image_url: width: 550 }} 550w,{%- endif -%}
                        {{ row1_img_small1 | image_url: width: row1_img_small1.width }} {{ row1_img_small1.width }}w"
                sizes="(max-width: 768px) 100vw, 25vw"
                alt="{{ row1_img_small1.alt | default: 'Small image 1.1' | escape }}"
                loading="lazy"
                width="{{ row1_img_small1.width }}"
                height="{{ row1_img_small1.height }}">
            </div>
          {% endif %}
          {% if row1_img_small2 %}
            <div class="image-container-{{ section.id }} item-small">
              <img
                src="{{ row1_img_small2 | image_url: width: row1_img_small2.width }}"
                srcset="{%- if row1_img_small2.width >= 200 -%}{{ row1_img_small2 | image_url: width: 200 }} 200w,{%- endif -%}
                        {%- if row1_img_small2.width >= 300 -%}{{ row1_img_small2 | image_url: width: 300 }} 300w,{%- endif -%}
                        {%- if row1_img_small2.width >= 400 -%}{{ row1_img_small2 | image_url: width: 400 }} 400w,{%- endif -%}
                        {%- if row1_img_small2.width >= 550 -%}{{ row1_img_small2 | image_url: width: 550 }} 550w,{%- endif -%}
                        {{ row1_img_small2 | image_url: width: row1_img_small2.width }} {{ row1_img_small2.width }}w"
                sizes="(max-width: 768px) 100vw, 25vw"
                alt="{{ row1_img_small2.alt | default: 'Small image 1.2' | escape }}"
                loading="lazy"
                width="{{ row1_img_small2.width }}"
                height="{{ row1_img_small2.height }}">
            </div>
          {% endif %}
        </div>
      {% endif %}

      {%- assign row2_img_small1 = section.settings.row2_img_small1 -%}
      {%- assign row2_img_small2 = section.settings.row2_img_small2 -%}
      {%- assign row2_img_large = section.settings.row2_img_large -%}

      {% if row2_img_small1 or row2_img_small2 or row2_img_large %}
        <div class="image-row-{{ section.id }}">
          {% if row2_img_small1 %}
            <div class="image-container-{{ section.id }} item-small">
              <img
                src="{{ row2_img_small1 | image_url: width: row2_img_small1.width }}"
                srcset="{%- if row2_img_small1.width >= 200 -%}{{ row2_img_small1 | image_url: width: 200 }} 200w,{%- endif -%}
                        {%- if row2_img_small1.width >= 300 -%}{{ row2_img_small1 | image_url: width: 300 }} 300w,{%- endif -%}
                        {%- if row2_img_small1.width >= 400 -%}{{ row2_img_small1 | image_url: width: 400 }} 400w,{%- endif -%}
                        {%- if row2_img_small1.width >= 550 -%}{{ row2_img_small1 | image_url: width: 550 }} 550w,{%- endif -%}
                        {{ row2_img_small1 | image_url: width: row2_img_small1.width }} {{ row2_img_small1.width }}w"
                sizes="(max-width: 768px) 100vw, 25vw"
                alt="{{ row2_img_small1.alt | default: 'Small image 2.1' | escape }}"
                loading="lazy"
                width="{{ row2_img_small1.width }}"
                height="{{ row2_img_small1.height }}">
            </div>
          {% endif %}
          {% if row2_img_small2 %}
            <div class="image-container-{{ section.id }} item-small">
              <img
                src="{{ row2_img_small2 | image_url: width: row2_img_small2.width }}"
                srcset="{%- if row2_img_small2.width >= 200 -%}{{ row2_img_small2 | image_url: width: 200 }} 200w,{%- endif -%}
                        {%- if row2_img_small2.width >= 300 -%}{{ row2_img_small2 | image_url: width: 300 }} 300w,{%- endif -%}
                        {%- if row2_img_small2.width >= 400 -%}{{ row2_img_small2 | image_url: width: 400 }} 400w,{%- endif -%}
                        {%- if row2_img_small2.width >= 550 -%}{{ row2_img_small2 | image_url: width: 550 }} 550w,{%- endif -%}
                        {{ row2_img_small2 | image_url: width: row2_img_small2.width }} {{ row2_img_small2.width }}w"
                sizes="(max-width: 768px) 100vw, 25vw"
                alt="{{ row2_img_small2.alt | default: 'Small image 2.2' | escape }}"
                loading="lazy"
                width="{{ row2_img_small2.width }}"
                height="{{ row2_img_small2.height }}">
            </div>
          {% endif %}
          {% if row2_img_large %}
            <div class="image-container-{{ section.id }} item-large">
              <img
                src="{{ row2_img_large | image_url: width: row2_img_large.width }}"
                srcset="{%- if row2_img_large.width >= 375 -%}{{ row2_img_large | image_url: width: 375 }} 375w,{%- endif -%}
                        {%- if row2_img_large.width >= 550 -%}{{ row2_img_large | image_url: width: 550 }} 550w,{%- endif -%}
                        {%- if row2_img_large.width >= 750 -%}{{ row2_img_large | image_url: width: 750 }} 750w,{%- endif -%}
                        {%- if row2_img_large.width >= 1100 -%}{{ row2_img_large | image_url: width: 1100 }} 1100w,{%- endif -%}
                        {%- if row2_img_large.width >= 1500 -%}{{ row2_img_large | image_url: width: 1500 }} 1500w,{%- endif -%}
                        {{ row2_img_large | image_url: width: row2_img_large.width }} {{ row2_img_large.width }}w"
                sizes="(max-width: 768px) 100vw, 50vw"
                alt="{{ row2_img_large.alt | default: 'Large image 2' | escape }}"
                loading="lazy"
                width="{{ row2_img_large.width }}"
                height="{{ row2_img_large.height }}">
            </div>
          {% endif %}
        </div>
      {% endif %}
    </div>
  </div>
</div>

{% schema %}
  {
    "name": "Image Gallery Rows",
    "tag": "section",
    "class": "section-image-gallery-rows",
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Section Title",
        "default": "Our Gallery"
      },
      {
        "type": "richtext",
        "id": "subtitle",
        "label": "Section Subtitle",
        "default": "<p>Optional subtitle description here.</p>"
      },
      {
        "type": "header",
        "content": "Row 1: 1 large, 2 small"
      },
      {
        "type": "image_picker",
        "id": "row1_img_large",
        "label": "Large image (50%)"
      }, {
        "type": "image_picker",
        "id": "row1_img_small1",
        "label": "Small image 1 (25%)"
      }, {
        "type": "image_picker",
        "id": "row1_img_small2",
        "label": "Small image 2 (25%)"
      }, {
        "type": "header",
        "content": "Row 2: 2 small, 1 large"
      }, {
        "type": "image_picker",
        "id": "row2_img_small1",
        "label": "Small image 1 (25%)"
      }, {
        "type": "image_picker",
        "id": "row2_img_small2",
        "label": "Small image 2 (25%)"
      }, {
        "type": "image_picker",
        "id": "row2_img_large",
        "label": "Large image (50%)"
      }, {
        "type": "range",
        "id": "gap_size",
        "min": 0,
        "max": 30,
        "step": 2,
        "unit": "px",
        "label": "Gap between images",
        "default": 10
      }
    ],
    "presets": [
      {
        "name": "Image Gallery Rows"
      }
    ]
  }
{% endschema %}